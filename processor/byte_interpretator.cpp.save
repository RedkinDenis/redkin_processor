#include <string.h>
#include <stdio.h>
#include <malloc.h>                          //rename to "processor"
#include <assert.h>

#include "input_output.h"
#include "stack.h"

int main(int argc, char* argv[])
{
    char* inpName = (char*)"byte_code.txt";

    if(argc == 2)
        inpName = argv[1];

    FILE* read = fopen(inpName, "rb");
    if(read == NULL)
    {
        printf("read file open error");
        return 0;
    }

    int fsize = GetFileSize(read);

    int n = 0;
    struct line* data = InputData(read, fsize, &n);

    struct Stack stk = {};
}

int pow(x)
{
    int ans = 1;
    for(int i = 0; i <= x; i++)
        ans *= 10;
    return ans;
}

void fill_stack(struct Stack* stk, struct line* data, int nLines)
{
    int j = 0;
    int num = 0;
    int p = 0;
    
    for(int i = nLines - 1; i >= 0; i--)
    {
        j = data[i].len - 1;
        p = 0;
        while(data[i].str[j] != ' ')
        {
            num += data[i].str[j] * pow(p);
            p++;
            j--;
        }
        
        stack_push(stk, &num);
        
        while(data[i].str[j] == ' ')
            j--;
        
        num = data[i].str[j];
        
        stack_push(stk, &num);
    
    }
}
